<html>
    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>

    <link rel="stylesheet" type="text/css" href="css/styles.css" />

  </head>
  <body>

    <div id="menu">
    <table>
    <tr>
    <td>Height </td>
    <td><input type='range' id='height' min='1' max='75' value='25' oninput="adjustHeight(value)"/></td>
    </tr>
    
    <tr>
    <td>Width</td>
    <td><input type='range' id='width'  min='1' max='75' value = '35' oninput="adjustWidth(value)"/></td>
    </tr>

    <tr>
    <td>Depth</td>  
    <td><input type='range' id='depth'  min='1' max='75' value = '50'oninput="adjustDepth(value)"/></td>
    </tr>

    <tr>
    <td>Wall Color</td>  
    <td><input type='color' value ='#D3D3D3' id='wallcolor'oninput="adjustColor(value, walls)"/></td>
    </tr>
   
    <tr>
    <td>Roof Color</td>
    <td><input type='color' value ='#9c7151'id='wallcolor'oninput="adjustColor(value, houseTop)"/></td>
    </tr>


    </table>
  </div>
   <div id="world">
  Use your mouse wheel to zoom in and out and these sliders to change dimensions.

   
    <script src="js/three.min.js"></script>
    <script src="js/controls/OrbitControls.js"></script>
    
    <script type="text/javascript" src="js/jquery142.min.js"></script>





    <script>
      
      
       

      var front = new THREE.Mesh();
      var left = new THREE.Mesh();
      var right = new THREE.Mesh();
      var back = new THREE.Mesh();
      var roof = new THREE.Mesh();

      var house = [];
      var onEnd = [];
      var onSide = [];
      var houseTop = [];	
      var walls = [];

      var wallcolor = 0xD3D3D3;
      var baseofworld = 0;
      var wall_thickness = .1;
      var width = 1;
      var height = 1;
      var depth = 1;
      var pitch = 5;

      var scene = new THREE.Scene();
       var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 800 );
      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( (window.innerWidth/2), (window.innerHeight/2) );


      document.body.appendChild( renderer.domElement );
      
      renderer
      
      var controls = new THREE.OrbitControls( camera, renderer.domElement );        
      
      controls.maxPolarAngle = (Math.PI/2) -.1; 
      

      controls.maxDistance = 200;
      camera.position.x = 25;
      camera.position.y = 35;
      camera.position.z = 50;
      camera.lookAt( scene.position );
      
      var buildGround = function() {

      var grasstexture = THREE.ImageUtils.loadTexture( "textures/grasslight-big.jpg" );
      grasstexture.wrapS = grasstexture.wrapT = THREE.RepeatWrapping;
      grasstexture.repeat.set(2, 2);

      var fieldmaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, map: grasstexture } );

      fieldmaterial.side = THREE.DoubleSide;
      var groundGeometry = new THREE.PlaneGeometry(500, 500, 1, 1);

      ground = new THREE.Mesh(groundGeometry, fieldmaterial);

      ground.position.y = baseofworld;
      ground.position.x = 0;
      ground.rotation.x = - Math.PI / 2;
      ground.receiveShadow = true;
      scene.add(ground);  

      }


















      var buildSky = function () {

      var skytexture = THREE.ImageUtils.loadTexture( "textures/sky.jpg" );
      skytexture.wrapS = skytexture.wrapT = THREE.RepeatWrapping;
      

      var skymaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, map: skytexture } );
      
      skymaterial.side = THREE.DoubleSide;
      var skyGeometry = new THREE.SphereGeometry( 600, 100, 100 );
      

      sky = new THREE.Mesh(skyGeometry, skymaterial);
      scene.add(sky);  
      
      }



      var render = function () {
        requestAnimationFrame( render );

        

        renderer.render(scene, camera);
      };

      render();


   
      var updateTop = function () {

	roof.position.y = (height + ((width/2) * toRad(pitch)));
	console.log(roof.position.y);
	
	roof.scale.z = depth;
	roof.scale.x = width;
}



      var updateBuilding = function () {
        console.log("here");
        


        for(i = 0; i < house.length; i++) {
          
          house[i].scale.y = height;
          keepAboveGround(house[i]);
           
        }

        var dummy = false;
        var dummy2 = false;

        //resizes front and back

        for(i = 0; i < onEnd.length; i++) {
          

          onEnd[i].scale.x = width;
          onEnd[i].scale.y = height;

          if (dummy) {

          onEnd[i].position.z = ((depth /2) * -1);

          }

          else {

          onEnd[i].position.z = (depth /2);
          dummy = true;

          }
          
        }


        //updates sides
        for (i =0; i < onSide.length; i++) {

          onSide[i].scale.z = depth;
          onSide[i].scale.y = height;
          
          if (dummy2) {

          onSide[i].position.x = ((width /2) * -1);

          }

          else {

          onSide[i].position.x = (width /2);
          dummy2 = true;

          }
          
        }


	updateTop();





      }









      

      var keepAboveGround = function (object) {

            

        object.position.y = baseofworld + (height/2);
        

      }


      var buildHouse = function () {

          

      //wall 1
      front = buildWall(width, height, wall_thickness);
      front.position.z = (depth /2);
      onEnd.push(front);
      scene.add(front);

      var frontedges = new THREE.WireframeHelper( front, 0x000000);
      frontedges.material.linewidth = 2;

      scene.add(frontedges);


      
    

      //wall 3
      back = buildWall(width, height , wall_thickness);
      back.position.z = ((depth /2) * -1);
      onEnd.push(back);
      scene.add(back);
      
      
      var backedges = new THREE.WireframeHelper( back, 0x000000);
      backedges.material.linewidth = 2;
      scene.add(backedges);


      //wall 2
      left = buildWall(wall_thickness, height, depth);
      left.position.x = ((width /2) * -1);
      onSide.push(left);
      scene.add(left);
      
      
      
      var leftedges = new THREE.WireframeHelper( left, 0x000000);
      leftedges.material.linewidth = 2;

      scene.add(leftedges);


      //wall 4
      right = buildWall(wall_thickness, height, depth);
      right.position.x = (width /2);
      onSide.push(right);
      scene.add(right);
      
      
      
      var rightedges = new THREE.WireframeHelper( right, 0x000000);
      rightedges.material.linewidth = 2;
      scene.add(rightedges);

      
      
      //ceiling


      roof = buildTop(width, wall_thickness, depth);
      //top = buildTop(width, wall_thickness, depth);
      roof.position.y = height;
      roof.rotation.z = (toRad(pitch) * -1);

      houseTop.push(roof);

      scene.add(roof);

    

      }

      function toRad(Value) {
    /** Converts numeric degrees to radians */
    return Value * Math.PI / 180;
}









      var buildTop = function (x,y,z) {

      var wall_geometry = new THREE.BoxGeometry( x, y, z );
      var wall_material= new THREE.MeshBasicMaterial( { color: 0x9c7151 } );
      var wall = new THREE.Mesh( wall_geometry, wall_material );
      

      return wall;


      } 




      //This function creates every wall.
      
      var buildWall = function (x,y,z) {

      var wall_geometry = new THREE.BoxGeometry( x, y, z );
     
      
       var wall_material = wrapWall();
     
      wall_material.side = THREE.DoubleSide;
      //
     
      
      var wall = new THREE.Mesh( wall_geometry, wall_material );
      
      //wall.position.y = baseofworld + (y/2);
      keepAboveGround(wall);

      house.push(wall);
      walls.push(wall);


      return wall;


      } 
      var wrapWall = function () {

	var wrapper = new THREE.MeshBasicMaterial( {color: wallcolor});
	return wrapper;
      }	
      var buildFloor = function () {


      //add floor

      var floortexture = THREE.ImageUtils.loadTexture( "textures/wood_floor.jpg" );
      floortexture.wrapS = floortexture.wrapT = THREE.RepeatWrapping;
      floortexture.repeat.set(1, 1);

      var floormaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, map: floortexture } );


      var floorGeometry = new THREE.PlaneGeometry(width, depth, 1, 1);

      floor = new THREE.Mesh(floorGeometry, floormaterial);

      floor.position.y = baseofworld +.1;
      floor.position.x = 0;
      floor.rotation.x = - Math.PI / 2;
      floor.receiveShadow = true;
      scene.add(floor);  


      
      }



      var adjustHeight = function (hchange) {

        height = parseInt(hchange);
               
        updateBuilding();


        
  
      }

      var adjustWidth = function (wchange) {

        width = parseInt(wchange);

        updateBuilding();
  
      }

      var adjustDepth = function (dchange) {

        depth = parseInt(dchange);

        updateBuilding();
  
      }

     var adjustColor = function (cchange, anarray) {

        

        wallcolor = "0x" + cchange.slice(1);

        

        for(i = 0; i < anarray.length; i++) {
          
          anarray[i].material.color.setHex(wallcolor);
           
        }




     }

      
 
   
	
      buildGround();
      buildSky();
      buildHouse();
     
      
      
     

      
    </script>
</div>


  </body>
</html>
